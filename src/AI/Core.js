/**
 * @module System.AI.Core
 * @description تم تحويله تلقائياً بواسطة ModuleFixer
 */
defineModule('System.AI.Core', ({ AI }) => {
  // === المحتوى الأصلي ===
  /**
   * @file 20_ai/4_ai_core.gs
   * @module System.AI.Core
   * @version 1.3.1 // ✅ تحديث الإصدار للإشارة إلى تحسينات التسجيل والتتبع
   * @author عبدالعزيز
   * @description
   * المحرك الرئيسي لطلبات AI: يتعامل مع بناء السياق الذكي، استدعاء نموذج Gemini (مع دعم الأدوات)،
   * معالجة الردود، وتكامل الذاكرة طويلة الأمد. يوفر مرونة عالية في تكوين الطلبات ومعالجة الأخطاء.
   * المراحل المعمارية المطبقة:
   * • 1   defineModule وربط التبعيات
   * • 6   تحقق من صحة المدخلات
   * • 9   تسجيل الوثائق في DocsManager
   * • 10  حفظ الاستدعاءات في LongTermMemory (معزز)
   * • 11  إرسال Telemetry لكل استدعاء (معزز)
   * • 12  مراقبة الأداء والأخطاء (معزز)
   * • 33  دمج كامل للذاكرة طويلة الأمد وقصيرة الأمد
   * • 34  دعم استدعاء الأدوات بواسطة النموذج (Tool Use/Function Calling)
   * • 35  معالجة أخطاء API وإعادة المحاولة بذكاء
   * • 36  مرونة في اختيار النموذج ومعلمات التوليد
   * • 37  التعامل مع تسلسل الأدوات (Tool Chaining - عبر إعادة استدعاء ask - ملاحظة في التنفيذ)
   * • **جديد: دمج askJSON و askForCodeAnalysis كوظائف أساسية هنا مع تسجيل مفصل**
   */



  // ✅ تفعيل فحص مسبق: التحقق من جاهزية الوحدات الأساسية قبل المتابعة
  if (!ModuleVerifier?.checkReady('Config', ['get', 'getAll'])) {
    Telemetry?.logError('❌ AI.Core: وحدة \'Config\' غير جاهزة. تم إيقاف التهيئة.');

  }

  // === التصدير ===
  return {
    // أضف الدوال والمتغيرات التي تريد تصديرها هنا
  };
});
