# 🎯 معايير الكود - G-Assistant

## 🧠 فلسفة المشروع

- **الوضوح أولاً:** الكود يجب أن يُفهم دون شرح
- **الاستدامة:** كل سطر يُكتب يجب أن يخدم النظام على المدى الطويل
- **الذكاء التفاعلي:** الوكلاء البرمجيون يجب أن يتعاونوا بسلاسة
- **المرونة:** النظام قابل للتوسع والتعديل دون كسر أي وحدة

## 🛠️ أدوات الفحص والتنسيق

| الأداة | الوظيفة | الحالة |
|--------|---------|--------|
| `Prettier` | تنسيق الكود تلقائياً | إلزامي |
| `ESLint` | كشف الأخطاء الأسلوبية | إلزامي |
| `Git Hooks` | منع الدمج قبل الفحص | إلزامي |
| `CI/CD` | فحص تلقائي عبر GitHub Actions | إلزامي |

## 🧩 أنماط كتابة الكود

### 📦 المتغيرات والدوال
- `camelCase` للمتغيرات والدوال
- `UPPER_SNAKE_CASE` للثوابت
- `PascalCase` للكلاسات والأنواع
- `_camelCase` للمتغيرات الخاصة

### 🔐 التصريح عن المتغيرات
```javascript
const MAX_RETRIES = 3; // ثابت
let userScore = 0;     // متغير قابل للتغيير
```

### 🧠 معالجة الأخطاء
```javascript
try {
  const result = await fetchData();
} catch (error) {
  Logger.error('فشل في جلب البيانات:', error);
  throw new Error('خطأ في الاتصال');
} finally {
  cleanup();
}
```

## 📝 التوثيق والتعليقات

### 💬 فلسفة التعليق
> اشرح "لماذا" وليس "ماذا"

### 📚 JSDoc إلزامي
```javascript
/**
 * يحلل أمر المستخدم ويوجهه للوكيل المناسب
 * @param {string} command - الأمر النصي
 * @param {object} context - سياق المحادثة
 * @returns {Promise<string>} - رد الوكيل
 * @throws {Error} - إذا لم يُعثر على وكيل مناسب
 */
async function processCommand(command, context) { ... }
```

## 🗂️ إدارة الوحدات البرمجية

### 1. عدم حذف المحتوى القائم
- لا تقم بحذف أي دالة أو ملف موجود إلا بعد:
  1. التحقق من عدم وجود استخدامات (search across repo)
  2. توثيق سبب الحذف في Issue أو PR
  3. الحصول على موافقة من صاحب الوحدة أو القائد التقني

### 2. عدم إضافة وحدة جديدة عشوائياً
- قبل إنشاء مجلد أو ملف وحدة جديد:
  1. ابحث عن وحدات مشابهة بالأسماء أو الوظيفة
  2. إذا وجدت وحدة تؤدي الغرض، قدّم اقتراح دمجها بدلاً من إنشاء أخرى
  3. دوّن نتائج البحث في وصف الـ PR لتسهيل مراجعة الأمر

### 3. قالب للهيدر والفوتر في كل وحدة

#### 3.1 هيدر (Header)
```js
/**
 * @module ModuleName
 * @version 1.2.0
 * @description موجز قصير عن ما يقدّمه هذا الملف
 * @author Your Name
 * @since 2025-08-11
 */
```

#### 3.2 فوتر (Footer)
```js
/**
 * @lastModified 2025-08-11
 * @nextReview  2025-10-11
 * @see docs/core-services.md#ModuleName
 */
```

## 🔧 نظام الإصلاح الذاتي

- كل وحدة تحتوي على وكيل إصلاح خاص بها
- يتم تسجيل السياق الكامل عند حدوث خطأ
- يتم اقتراح إصلاحات تلقائية عبر `FixSuggestion` و `AutoPatch`

## 📊 مراقبة الأداء

- نقاط قياس مدمجة داخل كل وحدة
- لوحة مراقبة داخل Google Sheets
- تسجيل الأخطاء حسب الخطورة

## 🧱 نصائح صارمة للمطور الجديد

- **قبل إنشاء أي ملف جديد، ابحث جيداً في المشروع**
- اقرأ كل المستندات قبل كتابة أي سطر كود
- لا تتجاوز المساعدين الذكيين
- احترم التسلسل
- التزم بالمعايير البرمجية
- استخدم الرسائل الموحدة
- لا تكتب كود غير موثق
- احترم روح الفريق
- **لا تعدل الملفات الأساسية بدون إذن**
- **التزم بنطاق المهمة**

## 🧯 استكشاف الأخطاء

| الخطأ | السبب المحتمل | الحل |
|-------|----------------|------|
| `ReferenceError` | متغير غير معرف | تحقق من التسمية |
| `TypeError` | استخدام غير صحيح للكائن | راجع نوع البيانات |
| `AgentNotFoundError` | وكيل غير موجود | تحقق من التكوين |

## 🔧 تنظيم الملفات والمجلدات

- **الوحدات البرمجية:** `src/ui/`, `src/ai/`, `src/agents/`
- **الاختبارات:** `tests/` بنفس هيكل الوحدة
- **المواصفات:** `doc/specs/` مربوطة بكل وحدة

## 🤖 التنسيق مع المساعدين

- **Gemini AI:** يكتب تقارير في `reports/` ويُسند المهام
- **Amazon AI:** ينفذ التعديلات ويكتب في `fixes_log.md`
- **Copilot:** مسؤول عن واجهة المستخدم

## 📄 مراجعة الكود

- المراجعة البشرية إلزامية قبل الدمج النهائي
- يُمنع الدمج المباشر إلى master أو main
- يجب استخدام Pull Request مع مراجعة